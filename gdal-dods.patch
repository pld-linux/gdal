--- gdal-1.3.0/configure.in.orig	2005-09-03 13:07:50.228591000 +0200
+++ gdal-1.3.0/configure.in	2005-09-03 15:46:35.931464216 +0200
@@ -1396,9 +1396,11 @@
     if test -x $DODS_BIN/opendap-config ; then 
       dnl OPeNDAP 3.4 and earlier lack opendap-config, but use it if avail.
       LIBS="$LIBS `$DODS_BIN/opendap-config --libs`"
+      DODS_INC="`$DODS_BIN/opendap-config --cflags`"
     elif test -x $DODS_BIN/dap-config ; then 
       dnl OPeNDAP 3.4 and earlier lack opendap-config, but use it if avail.
       LIBS="$LIBS `$DODS_BIN/dap-config --libs`"
+      DODS_INC="`$DODS_BIN/dap-config --cflags`"
     else
       dnl Otherwise try to put things together in a more primitive way.
       LIBS="$LIBS -L$DODS_LIB -ldap++ -lpthread -lrx"

--- gdal-1.6.1/frmts/dods/dodsdataset2.cpp.org	2009-07-15 12:54:31.160838902 +0200
+++ gdal-1.6.1/frmts/dods/dodsdataset2.cpp	2009-07-15 12:58:38.080454628 +0200
@@ -693,15 +693,15 @@
 /* -------------------------------------------------------------------- */
 /*      Try and fetch the corresponding DAS subtree if it exists.       */
 /* -------------------------------------------------------------------- */
-    AttrTable *poFileInfo = oDAS.find_container( "GLOBAL" );
+    AttrTable *poFileInfo = oDAS.container()->find_container( "GLOBAL" );
 
     if( poFileInfo == NULL )
     {
-        poFileInfo = oDAS.find_container( "NC_GLOBAL" );
+        poFileInfo = oDAS.container()->find_container( "NC_GLOBAL" );
 
 	if( poFileInfo == NULL )
 	{
-	    poFileInfo = oDAS.find_container( "HDF_GLOBAL" );
+	    poFileInfo = oDAS.container()->find_container( "HDF_GLOBAL" );
 
 	    if( poFileInfo == NULL )
 	    {
@@ -1275,7 +1275,7 @@
 /* -------------------------------------------------------------------- */
 /*      Try and fetch the corresponding DAS subtree if it exists.       */
 /* -------------------------------------------------------------------- */
-    AttrTable *poBandInfo = poDODS->GetDAS().find_container( oVarName );
+    AttrTable *poBandInfo = poDODS->GetDAS().container()->find_container( oVarName );
 
     if( poBandInfo == NULL )
     {
--- gdal-1.6.1/ogr/ogrsf_frmts/dods/ogrdodsdatasource.cpp~	2009-07-15 13:13:25.060367275 +0200
+++ gdal-1.6.1/ogr/ogrsf_frmts/dods/ogrdodsdatasource.cpp	2009-07-15 13:13:49.337227887 +0200
@@ -196,9 +196,9 @@
     for( dv_i = oDAS.container()->attr_begin(); dv_i != oDAS.container()->attr_end(); dv_i++ )
     {
         if( EQUALN(oDAS.get_name(dv_i).c_str(),"ogr_layer_info",14) 
-            && oDAS.is_container( dv_i ) )
+            && oDAS.container()->is_container( dv_i ) )
         {
-            AttrTable *poAttr = oDAS.get_attr_table( dv_i );
+            AttrTable *poAttr = oDAS.container()->get_attr_table( dv_i );
             string target_container = poAttr->get_attr( "target_container" );
             BaseType *poVar = poDDS->var( target_container.c_str() );
             
--- gdal-1.6.1/ogr/ogrsf_frmts/dods/ogrdodsdatasource.cpp~	2009-07-15 13:14:32.077112316 +0200
+++ gdal-1.6.1/ogr/ogrsf_frmts/dods/ogrdodsdatasource.cpp	2009-07-15 13:34:25.010626056 +0200
@@ -193,7 +193,7 @@
 /* -------------------------------------------------------------------- */
     AttrTable::Attr_iter dv_i;
 
-    for( dv_i = oDAS.attr_begin(); dv_i != oDAS.attr_end(); dv_i++ )
+    for( dv_i = oDAS.container()->attr_begin(); dv_i != oDAS.container()->attr_end(); dv_i++ )
     {
         if( EQUALN(oDAS.get_name(dv_i).c_str(),"ogr_layer_info",14) 
             && oDAS.container()->is_container( dv_i ) )
